function $(e){if("string"==typeof e&&e.startsWith("<")&&e.endsWith(">"))try{const t=document.createElement("template");return t.innerHTML=e.trim(),new DOMQuery(t.content.childNodes)}catch(e){}else if(e===document)return new DOMQuery([document]);return new DOMQuery(e)}function isVisible(e){let t=window.getComputedStyle(e);return"0"!==t.width&&"0"!==t.height&&"0"!==t.opacity&&"none"!==t.display&&"hidden"!==t.visibility}$.extend=function(e,...t){e||(e={});for(const i of t)if(i&&"object"==typeof i)for(const t in i)i.hasOwnProperty(t)&&("object"!=typeof i[t]||null===i[t]||Array.isArray(i[t])?e[t]=i[t]:e[t]=$.extend(e[t]||{},i[t]));return e};class DOMQuery{constructor(e){if(this.elements=[],this._dataCache=new WeakMap,"string"==typeof e)if(e.includes(":visible")){const t=e.replace(":visible",""),i=document.querySelectorAll(t);this.elements=Array.from(i).filter(isVisible)}else this.elements=Array.from(document.querySelectorAll(e));else e instanceof Element?this.elements=[e]:e instanceof NodeList||e instanceof Array||e instanceof HTMLCollection?this.elements=Array.from(e):this.elements=[];this.elements.forEach((e=>{this._dataCache.has(e)||this._dataCache.set(e,{})}))}get length(){return this.elements.length}siblings(e){const t=[];this.elements.forEach((i=>{const n=i.parentElement;if(n){const s=Array.from(n.children).filter((e=>e!==i));"string"==typeof e?s.forEach((i=>{i.matches(e)&&t.push(i)})):t.push(...s)}}));const i=[...new Set(t)];return new DOMQuery(i)}each(e){return this.elements.forEach(((t,i)=>e.call(t,i,t))),this}addClass(e){return this.each(((t,i)=>i.classList.add(e)))}removeClass(e){return this.each(((t,i)=>i.classList.remove(e)))}toggleClass(e){return this.each(((t,i)=>i.classList.toggle(e)))}text(e){if(void 0===e){let e=this.elements[0];return e?e.textContent:""}return this.each(((t,i)=>i.textContent=e))}html(e){if(void 0===e){let e=this.elements[0];return e?e.innerHTML:""}return this.each(((t,i)=>i.innerHTML=e))}css(e,t){if(void 0===t&&"string"==typeof e){let t=this.elements[0];return t?t.style[e]:""}return"object"==typeof e?this.each(((t,i)=>{for(const t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t])})):this.each(((i,n)=>n.style[e]=t))}on(e,t){return this.each(((i,n)=>n.addEventListener(e,t)))}click(e){return"function"==typeof e?this.each(((t,i)=>i.addEventListener("click",e))):this.each(((e,t)=>t.click()))}off(e,t){return this.each(((i,n)=>n.removeEventListener(e,t)))}find(e){const t=[];return this.each(((i,n)=>{t.push(...n.querySelectorAll(e))})),new DOMQuery(t)}attr(e,t){if(void 0===t){let t=this.elements[0];return t?t.getAttribute(e):""}return this.each(((i,n)=>n.setAttribute(e,t)))}removeAttr(e){return this.each(((t,i)=>i.removeAttribute(e)))}after(e){return this.each(((t,i)=>{if("string"==typeof e)i.insertAdjacentHTML("afterend",e);else if(e instanceof Element||e instanceof NodeList||e instanceof Array){(e instanceof Element?[e]:Array.from(e)).forEach((e=>i.parentNode.insertBefore(e,i.nextSibling)))}else e instanceof DOMQuery&&e.elements.forEach((e=>i.parentNode.insertBefore(e,i.nextSibling)))}))}hide(){return this.each(((e,t)=>t.style.display="none"))}show(e="block"){return this.each(((t,i)=>i.style.display=e))}fadeIn(e=400,t=void 0){return this.each(((i,n)=>{n.style.opacity=0,n.style.display="block",n.style.transition=`opacity ${e}ms`,n.offsetHeight,n.style.opacity=1,setTimeout((()=>{t&&t.call(n)}),e)}))}fadeOut(e=400,t=void 0){return this.each(((i,n)=>{n.style.transition=`opacity ${e}ms`,n.style.opacity=0,setTimeout((()=>{n.style.display="none",t&&t.call(n)}),e)}))}val(e){if(void 0===e){let e=this.elements[0];return e?e.value:""}return this.each(((t,i)=>i.value=e))}prepend(e){return this.each(((t,i)=>{if("string"==typeof e)i.insertAdjacentHTML("afterbegin",e);else if(e instanceof Element||e instanceof NodeList||e instanceof Array){(e instanceof Element?[e]:Array.from(e)).forEach((e=>i.insertBefore(e,i.firstChild)))}else e instanceof DOMQuery&&e.elements.forEach((e=>i.insertBefore(e,i.firstChild)))}))}mouseenter(e){return this.on("mouseenter",e)}mouseleave(e){return this.each(((t,i)=>i.addEventListener("mouseleave",e)))}offset(e=void 0){if(void 0===e){const e=this.elements[0];if(e){const t=e.getBoundingClientRect();return{top:t.top+window.scrollY,left:t.left+window.scrollX}}return{top:0,left:0}}return this.each(((t,i)=>{i.style.position="relative",i.style.top=`${e.top}px`,i.style.left=`${e.left}px`}))}outerHeight(e=!1){const t=this.elements[0];if(t){const i=t.offsetHeight;if(e){const e=window.getComputedStyle(t);return i+parseFloat(e.marginTop)+parseFloat(e.marginBottom)}return i}return null}appendTo(e){const t=$(e);return this.each(((e,i)=>{t.each(((e,t)=>t.appendChild(i)))}))}scrollTo(e,t=1e3,i=0){const n=$(e).elements[0];if(!n)return this;const s=window.pageYOffset,o=n.getBoundingClientRect().top+s-i-s,r=performance.now();let l=function(e){const i=e-r,n=Math.min(i/t,1);window.scrollTo(0,s+o*n),n<1&&requestAnimationFrame(l)};return requestAnimationFrame(l),this}parent(e){const t=[];return this.each(((i,n)=>{let s=n.parentElement;if(e)for(;s;){if(s.matches(e)){t.push(s);break}s=s.parentElement}else t.push(s)})),new DOMQuery(t)}data(e,t){if(void 0!==t)return this.each(((i,n)=>{this._dataCache.get(n)[e]=t}));{const t=this.elements[0];if(t){const i=this._dataCache.get(t);if(void 0===e)return i;if(void 0===i[e]){const n=t.getAttribute(`data-${e}`);null!==n&&(i[e]=this._parseDataAttribute(n))}return i[e]}}}slideDown(e=400){return this._slide("slideDown",e),this}slideUp(e=400){return this._slide("slideUp",e),this}slideToggle(e=400){return this._slide("slideToggle",e),this}_slide(e,t){this.each(((i,n)=>{n.scrollHeight;let s=null;if("slideDown"===e||"slideToggle"===e&&!isVisible(n)){n.style.overflow="hidden",n.style.maxHeight="0",n.style.display="block";const e=i=>{s||(s=i);const o=Math.min((i-s)/t,1);n.style.maxHeight=o*n.scrollHeight+"px",o<1?requestAnimationFrame(e):(n.style.maxHeight="",n.style.transition="",n.style.overflow="")};requestAnimationFrame(e)}else if("slideUp"===e||"slideToggle"===e&&"none"!==n.style.display){n.style.overflow="hidden",n.style.maxHeight=`${n.scrollHeight}px`;const e=i=>{s||(s=i);const o=Math.max(1-(i-s)/t,0);n.style.maxHeight=o*n.scrollHeight+"px",o>0?requestAnimationFrame(e):(n.style.display="none",n.style.maxHeight="",n.style.transition="",n.style.overflow="")};requestAnimationFrame(e)}}))}focus(){return this.elements.length>0&&this.elements[0].focus(),this}_parseDataAttribute(e){try{return JSON.parse(e)}catch(t){return e}}parents(e){const t=[];return this.each(((i,n)=>{let s=n.parentElement;for(;s;)e&&!s.matches(e)||t.push(s),s=s.parentElement})),new DOMQuery(t)}hasClass(e){let t=!1;return this.each(((i,n)=>{if(n.classList.contains(e))return t=!0,!1})),t}width(e){if(0===arguments.length)return this.elements.length>0?this.elements[0].offsetWidth:null;{const t="number"==typeof e?`${e}px`:e;return this.each(((e,i)=>{i.style.width=t})),this}}fadeToggle(e=400,t=void 0){return this.each(((i,n)=>{!isVisible(n)||!n.offsetHeight?(n.style.opacity=0,n.style.display="block",n.style.transition=`opacity ${e}ms`,n.offsetHeight,n.style.opacity=1,setTimeout((()=>{t&&t.call(n)}),e)):(n.style.transition=`opacity ${e}ms`,n.style.opacity=0,setTimeout((()=>{n.style.display="none",t&&t.call(n)}),e))}))}static create(e){const t=document.createElement("template");return t.innerHTML=e.trim(),new DOMQuery(t.content.childNodes.length>1?t.content.childNodes:t.content.firstChild)}}DOMQuery.prototype.extend=function(e,t){DOMQuery.prototype[e]=t},DOMQuery.prototype.extend("scrollTo",(function(e,t=1e3,i=0){const n=$(e).elements[0];if(!n)return this;const s=window.pageYOffset,o=n.getBoundingClientRect().top+s-i-s,r=performance.now();let l=function(e){const i=e-r,n=Math.min(i/t,1);window.scrollTo(0,s+o*n),n<1&&requestAnimationFrame(l)};return requestAnimationFrame(l),this})),function(e,t,i){let n="emoji",s={showTab:!0,animation:"fade",icons:[]};function o(e,i){switch(this.$content=$(e),this.options=i,this.index=t.emoji_index,i.animation){case"none":this.showFunc="show",this.hideFunc="hide",this.toggleFunc="toggle";break;case"slide":this.showFunc="slideDown",this.hideFunc="slideUp",this.toggleFunc="slideToggle";break;default:this.showFunc="fadeIn",this.hideFunc="fadeOut",this.toggleFunc="fadeToggle"}this._init()}t.emoji_index=0,o.prototype={_init:function(){let e,t,n,s,o,r=this,l=this.options.button,a=r.index;l||(e='<input type="image" class="emoji_btn" id="emoji_btn_'+a+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZBAMAAAA2x5hQAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUxpcfTGAPTGAPTGAPTGAPTGAPTGAPTGAPTGAPTGAPTGAPTGAOfx6yUAAAALdFJOUwAzbVQOoYrzwdwkAoU+0gAAAM1JREFUGNN9kK0PQWEUxl8fM24iCYopwi0muuVuzGyKwATFZpJIU01RUG/RBMnHxfz+Oef9uNM84d1+23nO+zxHKVG2WWupRJkdcAwtpCK0lpbqWE01pB0QayonREMoIp7AawQrWSgGGb4pn6dSeSh68FAVXqHqy3wKrkJiDGDTg3dnp//w+WnwlwIOJauF+C7sXRVfdha4O4oIJfTbtdSxs2uqhs585A0ko8iLTMEcDE1n65A+29pYAlr72nz9dKu7GuNTcsL2fDQzB/wCPVJ69nZGb3gAAAAASUVORK5CYII="/>',t=this.$content.offset().top+this.$content.outerHeight()+10,n=this.$content.offset().left+2,$(e).appendTo("body"),$("#emoji_btn_"+a).css({top:t+"px",left:n+"px"}),l="#emoji_btn_"+a);let c=this.options.showTab,h=this.options.basePath,d=this.options.icons,u=d.length;if(0===u)return!1;let f,m,p,g,y,A,w,_,v,b,x='<div class="emoji_container" id="emoji_container_'+a+'">',j='<div class="emoji_content">',T='<div class="emoji_tab" style="'+(1!==u||c?"":"display:none;")+'"><div class="emoji_tab_prev"></div><div class="emoji_tab_list"><ul>';for(let e=0;e<u;e++)if(m=d[e].name||"group"+(e+1),p=h+"/"+d[e].path,g=d[e].maxNum,y=d[e].excludeNums,A=d[e].file||".jpg",w=d[e].placeholder||"#em"+(e+1)+"_{alias}#",_=d[e].emoji,v=0,p){if(f='<div id="emoji'+e+'" class="emoji_icons" style="'+(0===e?"":"display:none;")+'"><ul>',_){if("object"!=typeof _)break;g=g||_.length;for(let e in _)_.hasOwnProperty(e)&&(v++,v>g||y&&y.indexOf(v)>=0||(b=w.replace(new RegExp("{alias}","gi"),e.toString()),f+='<li><a data-emoji_code="'+b+'" data-index="'+v+'" title="'+e+'"><img src="'+p+_[e]+A+'"/></a></li>'))}else{if(!g)continue;for(let e=1;e<=g;e++)y&&y.indexOf(e)>=0||(b=w.replace(new RegExp("{alias}","gi"),e.toString()),f+='<li><a data-emoji_code="'+b+'" data-index="'+e+'"><img src="'+p+e+A+'"/></a></li>')}f+="</ul></div>",j+=f,T+='<li data-emoji_tab="emoji'+e+'" class="'+(0===e?"selected":"")+'" title="'+m+'">'+m+"</li>"}j+="</div>",T+='</ul></div><div class="emoji_tab_next"></div></div>';x+=j,x+=T,x+='<div class="emoji_preview"><img/></div>',$(x).appendTo("body"),s=$(l).offset().top+$(l).outerHeight()+5,o=$(l).offset().left;let E="#emoji_container_"+a;$(E).css({top:s+"px",left:o+"px"});let C=u%8==0?parseInt(u/8):parseInt(u/8)+1,M=1;$(i).click((function(e){let t,i,n,s,o=e.target,a=r.$content.elements[0];o===$(l).elements[0]?$(E)[r.toggleFunc]():$(o).parents(E).length>0?(t=$(o).data("emoji_code")||$(o).parent().data("emoji_code"),i=$(o).data("emoji_tab"),t?("DIV"===a.nodeName?(n=$(E+' a[data-emoji_code="'+t+'"] img').attr("src"),s='<img class="emoji_icon" src="'+n+'"/>',r._insertAtCursor(a,s,!1)):r._insertAtCursor(a,t),r.hide(),r.$content.focus()):i?$(o).hasClass("selected")||($(E+" .emoji_icons").hide(),$(E+" #"+i).show(),$(o).addClass("selected").siblings().removeClass("selected")):$(o).hasClass("emoji_tab_prev")?M>1&&($(E+" .emoji_tab_list ul").css("margin-left","-503"*(M-2)+"px"),M--):$(o).hasClass("emoji_tab_next")&&M<C&&($(E+" .emoji_tab_list ul").css("margin-left","-503"*M+"px"),M++)):$(E+":visible").length>0&&(r.hide(),r.$content.focus())})),$(E+" .emoji_icons a").mouseenter((function(){2*($(this).offset().left-$(E).offset().left)<$(E).width()?$(E+" .emoji_preview").css({left:"auto",right:0}):$(E+" .emoji_preview").css({left:0,right:"auto"});let e=$(this).find("img").attr("src");$(E+" .emoji_preview img").attr("src",e).parent().show()})),$(E+" .emoji_icons a").mouseleave((function(){$(E+" .emoji_preview img").removeAttr("src").parent().hide()}))},_insertAtCursor:function(e,n,s){let o,r;if("DIV"===e.nodeName){if(e.focus(),t.getSelection){if(o=t.getSelection(),o.getRangeAt&&o.rangeCount){r=o.getRangeAt(0),r.deleteContents();let e=i.createElement("div");e.innerHTML=n;let t,l,a=i.createDocumentFragment();for(;t=e.firstChild;)l=a.appendChild(t);let c=a.firstChild;r.insertNode(a),l&&(r=r.cloneRange(),r.setStartAfter(l),s?r.setStartBefore(c):r.collapse(!0),o.removeAllRanges(),o.addRange(r))}}else if((o=i.selection)&&"Control"!==o.type){let e=o.createRange();e.collapse(!0),o.createRange().pasteHTML(html),s&&(r=o.createRange(),r.setEndPoint("StartToStart",e),r.select())}}else if(i.selection)e.focus(),o=i.selection.createRange(),o.text=n,o.select();else if(e.selectionStart||0===e.selectionStart){let t=e.selectionStart,i=e.selectionEnd,s=e.scrollTop;e.value=e.value.substring(0,t)+n+e.value.substring(i,e.value.length),s>0&&(e.scrollTop=s),e.focus(),e.selectionStart=t+n.length,e.selectionEnd=t+n.length}else e.value+=n,e.focus()},show:function(){$("#emoji_container_"+this.index)[this.showFunc]()},hide:function(){$("#emoji_container_"+this.index)[this.hideFunc]()},toggle:function(){$("#emoji_container_"+this.index)[this.toggleFunc]()}},e.prototype.extend(n,(function(e){return this.each((function(){t.emoji_index++;let i=$(this),r="plugin_"+n+t.emoji_index,l=i.data(r),a=$.extend({},s,"object"==typeof e&&e);l||i.data(r,l=new o(this,a)),"string"==typeof e&&l[e]()}))}))}(DOMQuery,window,document),function(e){let t="emojiParse",i={icons:[]};function n(e,t){this.$content=$(e),this.options=t,this._init()}n.prototype={_init:function(){let e,t,i,n,s,o,r=this,l=this.options.icons,a=this.options.basePath,c=l.length;if(c>0)for(let h=0;h<c;h++)if(e=a+"/"+l[h].path,t=l[h].file||".jpg",i=l[h].placeholder,i=i.replace("[","\\["),i=i.replace("]","\\]"),i=i.replace("(","\\("),i=i.replace(")","\\)"),n=l[h].emoji,e)if(n){if("object"!=typeof n)break;s=i.replace(new RegExp("{alias}","gi"),"([\\s\\S]+?)"),o=new RegExp(s,"gm"),r.$content.html(r.$content.html().replace(o,(function(i,s){let o=n[s];return o?'<img class="wp-smiley" src="'+e+o+t+'" title="'+s+'" alt="'+s+'"/>':i})))}else s=i.replace(new RegExp("{alias}","gi"),"(\\d+?)"),r.$content.html(r.$content.html().replace(new RegExp(s,"gm"),'<img class="wp-smiley" src="'+e+"$1"+t+'"/>'))}},e.prototype.extend(t,(function(e){return this.each((function(){let s=$(this),o=s.data("plugin_"+t),r=$.extend({},i,s.data(),"object"==typeof e&&e);o||s.data("plugin_"+t,o=new n(this,r)),"string"==typeof e&&o[e]()}))}))}(DOMQuery);